@import "../../../mixins/transition";
@import "../../../mixins/svg-icons";
@import "../../../variables/colors";
@import "../../../variables/shadows";
@import "../../../variables/form-file-picker";

// Прикрепление файлов: отображение прикрепленных файлов
.file-picker-previews-container {

    &.d-flex {
        column-gap: 1rem;
        row-gap: 1.5rem;
    }

    &.file-picker-previews-scale-on-hover {
        .file-picker-preview-wrapper {
            &:hover,
            &.active {
                z-index: $file-picker-preview-hover-z-index;
            }
        }

        a.file-picker-preview-scaler {
            outline: none !important;
            @include transition($file-picker-preview-transition);

            &:hover,
            &.active {
                // При наведении на удалённую картинку нужно убрать изменение opacity.
                opacity: 1 !important;
            }
        }

        .file-picker-preview-delete,
        .file-picker-preview-restore {
            @include transition($file-picker-preview-transition);

            &:hover {
                opacity: 1 !important;
            }
        }

        &.without-info .file-picker-preview-wrapper {
            &:hover,
            &.active {
                .file-picker-preview-delete,
                .file-picker-preview-restore {
                    opacity: 0;
                }
            }
        }

        .file-picker-preview {
            @include transition($file-picker-preview-hover-transition);
        }

        .file-picker-preview:hover,
        &.active .file-picker-preview {
            transform: $file-picker-preview-hover-transform;
            transform-origin: $file-picker-preview-hover-transform-origin;
        }
    }

    .file-picker-preview {
        display: block;
        border-radius: $file-picker-preview-border-radius;
        background: $file-picker-preview-bg;
        box-shadow: $box-shadow-2-strong;

        canvas {
            border-radius: $file-picker-preview-border-radius;
        }

        .file-picker-preview-image {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            pointer-events: none;
        }
    }

    .file-picker-preview-delete,
    .file-picker-preview-restore {
        position: absolute;
        width: $file-picker-preview-button-width;
        height: $file-picker-preview-button-width;
        top: $file-picker-preview-button-offset;
        right: $file-picker-preview-button-offset;
        z-index: 2;

        // Фон под иконку для лучшей видимости
        &:after {
            content: '';
            z-index: 1;
            position: absolute;
            display: block;
            width: $file-picker-preview-button-underlay-width;
            height: $file-picker-preview-button-underlay-width;
            top: 50%;
            left: 50%;
            margin-top: $file-picker-preview-button-underlay-offset;
            margin-left: $file-picker-preview-button-underlay-offset;
            background: $file-picker-preview-button-underlay-bg;
            border-radius: 50%;
        }

        svg {
            z-index: 2;
        }
    }

    .file-picker-previews-adder {
        border-radius: $file-picker-preview-border-radius;
        border: $file-picker-previews-adder-border;
        color: $file-picker-previews-adder-color;
        text-decoration: none;
        @include transition($file-picker-previews-adder-transition);

        &:hover {
            color: $file-picker-previews-adder-hover-color;
            border-color: $file-picker-previews-adder-hover-border-color;
            text-decoration: none;
        }

        &.disabled {
            color: $file-picker-previews-adder-disabled-color;
            border-color: $file-picker-previews-adder-disabled-border-color;
        }

        @include contained-mdi-icon-color-in-link(
                $file-picker-previews-adder-color,
                $file-picker-previews-adder-hover-color,
                $file-picker-previews-adder-disabled-color
        )
    }

    &.file-picker-previews-white-bg {
        .file-picker-preview {
            background-color: $file-picker-previews-with-white-bg;
            box-shadow: $box-shadow-3;
        }
    }

    .drag-and-drop-item {
        &.drag-and-drop-toggler,
        .drag-and-drop-toggler {
            cursor: move;
        }

        &.drag-and-drop-current {
            .file-picker-preview {
                transform: scale(1) !important;
                @include transition(none !important);
            }
        }

        &.drag-and-drop-over {
            position: relative;

            &:before {
                content: '';
                position: absolute;
                top: 0;
                left: $file-picker-previews-drag-and-drop-item-over-indicator-left;
                height: 100%;
                width: $file-picker-previews-drag-and-drop-item-over-indicator-width;
                background-color: $file-picker-previews-drag-and-drop-item-over-indicator-color;
            }
        }
    }
}
